максимально универсальный семисегментный дисплей часть первая вчера максимально универсальный семисегментный дисплей часть первая схемотехника производство разработка электроники сделай   случилось наследству досталась целая коробка семисегментных индикаторов гордой надписью комплект часы давно хотелось пустить е содержимое дело дошли руки оказалось внутри целый зоопарк разномастных индикаторов разных размеров цветов общим катодом общим анодом количеству штук двадцать пилить очередные часы пришла идея сделать собственно сабж максимально универсальный семисегментный дисплей  получилось катом     описанные ниже устройства являются довольно нишевыми сделаны мною примененный подход использован решения аналогичной задачи универсализации это потребуется текст разбавлю пояснениями начинающих основная цель спроектировать единую плату имеющиеся индикаторы различные идеи использования  статья получилась объемная разделил части вашему вниманию часть первая   постановка задачи  понимаю максимальной универсальностью спроектировать модуль помощью которого комбинаций создать любой практически любой разумных пределах дисплей отображение информации использованием этих самых семисегментных индикаторов голову приходит сразу десяток применений часы туда таймеры счетчики угодно термометры табло разных игр дисплеи отображения цифровой информации курсов валют индексов бирж т п общих чертах задача абсолютно тривиальная усложняется зоопарком типов индикаторов наличии одноразрядные китайские индикаторы размером цифры дюйма тип четыре светодиода сегмент дюйма тип пять светодиодов сегмент разных цветов различным типом подключения общим катодом общим анодом покрыть использование этих типов пришлось посидеть схемой разводкой которая давала возможность изменения топологии печатной платы управлять разными индикаторами поискав вечерок интернете удалось найти универсальных решений схем стало поводом написания данной статьи  приведенным примерам использования становится понятно модуль должен поддерживать различную разрядность одной цифры простых счетчиков событий шести индексов некоторых финансовых бирж решил ограничиться двумя цифрами большего трехдюймового размера тремя меньшего возможностью подключения одного модуля виде  выборе управляющей части долго думать пришлось выбор сразу пал готовые модули контроллере дешевизна простота использования этих модулей возможность легкого подключения интернету обширная комьюнити разработчиков элементарность программирования контроллера отмели другие варианты   приступим деталям  начнем питания семисегментных индикаторов большого размера каждый сегмент представляет собой цепочку нескольких последовательно включенных светодиодов такие дисплеи получится зажечь цифровыми уровнями напряжения падение цепочке светодиодов значения конкретное значение указывается даташите дисплей оно зависит характеристик светодиодов цвета количества варьироваться вольт ток каждый сегмент также превышает допустимые значения тока отдельный пин большинства контроллеров составляет ма соответственно нужно использовать напряжение вольт коммутирующие ключи управления сегментами общими выводами также стоит забывать динамической индикации последовательном переключении разрядов частотой превышающей частоту восприятия глаза человека это позволяет значительно снизить энергопотребление практически потери визуальной яркости дисплея  общее питание решено брать порта наиболее универсального стандарта данный момент непродолжительного гугления выбрал готовый модуль повышающего преобразователя мт компактный дешевый регулируемый достаточно высоким кпд вс нужно наших целей резервного питания отказался рукой интернет получить актуальную информацию любой момент  питание цифровой части обеспечит линейный стабилизатор классическое решение нетребовательных применений  транзисторным ключам  управления индикатором общим катодом сегменты нужно подавать плюс питания общий контакт катод подключить земле данных целей удобно использовать микросхемы источников тока пример картинке ниже подключение индикатора драйверу упрощенная схема одной ячейки лучшего понимания пути прохождения тока стоит заметить классической схеме должны токоограничивающие резисторы цепи каждого сегмента упущены причинам использования другого метода ограничения тока мах имеет изменять скважность управляющих импульсов сумме возможность регулировки напряжения питания индикаторов даст необходимый результат     индикаторов общим анодом наоборот общий контакт подключается плюсу питания сегменты коммутируются землю плане управления индикаторы общим анодом простые требуют коммутации высокого напряжения причине распространены управления сегментами удобно использовать микросхему массив составных транзисторов дарлингтона например всеми любимую  значительным преимуществом является стоимость которая разы меньше картинке ниже подключение индикатора драйверу упрощенная схема одной ячейки     заметить верхние части схем очень схожи пара драйверов подобрана неспроста относительно ножек вход выход совместимы это дает возможность сделать универсальное посадочное место плате добавив несколько перемычек запайку ножек питания бинго  упростить задачу динамической индикации решил изобретать велосипед городить е сдвиговые регистры взять надежное проверенное решение специализированный драйвер семисегментного дисплея эта микросхема умеет хранить внутренней памяти восьми цифр самостоятельно коммутировать разряды заранее установленной яркостью причине нужны резисторы последовательно каждым сегментом управляется драйвер шине микросхема имеет недостаток высокую стоимость имела пришли китайцы наклепали полный функциональный аналог стоимостью несколько центов название такое правда маркировка отличается отсутствует оригинальный логотип работе отличий замечено временные диаграммы такие греется отказов пока ответственных применений таки рекомендую ставить дорогой оригинал     набор купить локальных магазинах ардуинщиков цене четыре раза ниже оригинального драйвера правильно поняли набор матрицей платой рассыпухой дешевле четыре раза выбор очевиден  пока вс звучит очень просто бер м драйвер дисплея который вс делает зависимости типа индикатора ставим нужные ключи вуа ля кроме одного рассчитан работу дисплеями общим катодом напряжением сегмента никак иначе это дает сухом остатке перебирая разряды индикаторов драйвер подключает землю поддерживая высокий уровень катодах остальных разрядов вернемся схемам выше проанализируем случае индикатором общим анодом  нетрудно понять получим инверсию нужный разряд выключен остальные активные вместо динамической индикации дисплее сплошной засвет соседних разрядов избежать ситуации контроллером драйвером нужно добавить микросхему инвертирующую логические уровни максимальное количество разрядов шесть гуглим находим отлично общего катода вместо микросхемы сделаем перемычки использовать совместимую микросхему буфер обязательно выходом открытый коллектор сток типа работать отсутствия подтяжки питанию  итоге имеем финальные схемы подключения индикаторов общего катода просто драйвер плюс ключи способные подавать сегменты повышенное напряжение даташите приводится схема подключения индикаторов размера дюйма это запитано вольт мои экземпляры наотрез отказались работать таком низком напряжении сегмент начинал слабо светиться подаче светодиод катоды подключены напрямую контроллер прокачивать ма каждый канал ма сегмент головой достаточно данных типоразмеров индикаторов     общего анода немного сложнее нужно использовать разнотипные ключи верхнего нижнего плечей плюс инвертирующий буфер управления разрядами инвертирование сигналов сегментов получаем автоматически использовании     видим стороны драйвера управляющего всем этим никакой разницы именно тип индикатора установлен модуле модифицировать прошивку требуется  замечу использовании внешних драйверов встроенное контроллер ограничение тока сегментов которое задается резистором входе корректно работать поэтому интенсивность будем регулировать напряжением питания максимальной скважности драйвер позволяет устанавливать интенсивность скважностью встроенного шим генератора шагом  управляющей части выдумывать нужно берем типовое включение модуля заводим линии прошивки внешний разъем дополнительно решил добавить преобразователь протокола устанавливать необязательно места плате предостаточно пускай такая возможность преобразователь выбрал сн максимально простое бюджетное решение версии чипа сн преобразователь требует частотозадающего кварца встроен конвертер обвеса пара конденсаторов проще бывает     полная схема хорошем качестве  схемой определились приступать топологии печатной платы упоминал заморочки именно плату хотелось заказать партию плат нормальном производстве вышеперечисленные устройства дорабатывать месту напильником скальпелем непродолжительных размышлений плате вырисовались аж целых восемь посадочных мест семисегментные индикаторы   одному центру платы дисплея одной цифрой дисплея двумя цифрами соответственно дисплея тремя цифрами  краям платы расположены контакты расширения подключения справа ведущего одного аналогичного ведомого модуля схемы управления питания индикаторы  такая комбинация позволяет расширить разрядность шести цифр комбинируя расположение размер индикаторов изготовить табло различных предположим настольных игр часы контакты продублированы сигналы управления всеми сегментами выведены линии подключения разряда трехдюймовок разряд двухдюймовок  дополнительно оставшихся свободных канала подключены двум цепочкам дискретных светодиодов расположенных индикаторами например использовать фоновой подсветки сказать эффект  размер платы выбран таким образом выходила края индикаторов таком случае скомбинировать дисплей одинаковыми расстояниями цифрами бо льших ти разрядный меньших индикаторов  углам платы расположены четыре отверстия болт м крепления модуля несущей конструкции  микросхемы это возможно выбраны выводных корпусах вопрос миниатюризации данного устройства актуален плате выглядят стимпанково фоне привычных монстров это придает особого шарма ламповых усилителей  посадочное место модуль также совместимо модулями плата проектировалась вечера причине использовался простой принцип разводки автороутеров разделение горизонтальных вертикальных линий разные слои итоге плата получилась двухсторонняя несложная визуально красивая        плата отправлена производство канун китайского весеннего фестиваля карантинных мер кндр рассматривал популярные площадки изготовления мелкосерийных прототипов последней стоимость получилась долларов дешевле партии шт значимым плюсом фабрика закрывалась праздничную неделю суммарная стоимость составила доллара учетом доставки купона скидку пересчете плату долларов штуку несмотря разгар эпидемии коронавируса отправки ов фабрику моменту получения прошел день качество плат высоте     время пока китае изготавливались платы местном рекламном агентстве заказаны основы прозрачного акрила закрепить платы светорассеиватель посмотреть получилось задуманного  выглядит вариант платы запаянной индикаторы общим катодом фото указаны названия микросхем обведены перемычки запайку     индикаторы общим анодом     фото ниже различные комбинации индикаторов разных размеров можете понять также удвоить добавив модуль    далее осталось написать скрипт конкретную реализацию займемся следующей части  всем спасибо внимание  заинтересовался проектом пишите личку осталось десяток плат могу выслать файлы теги сделай электроника начинающих семисегментный индикатор  добавить метки хабы схемотехника производство разработка электроники сделай укажите причину минуса автор поработал ошибками  отправить анонимно 