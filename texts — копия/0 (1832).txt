создание т мной темы блог компании вчера создание т мной темы автор оригинала блог компании разработка веб сайтов дизайн перевод марта года разработчики дали посетителям сайта возможность пользоваться бета версией т мной темы материал перевод которого публикуем посвящ н рассказу создавалась т мная тема     баннер который позволяет включить т мную тему  зовут аарон шеки руководитель отдела дизайна участвую разработке дизайна компонентов интерфейса лежащих основе новых возможностей проекта  начала немного иронии лично являюсь любителем т мных интерфейсов  часто вижу уровень контраста т мных интерфейсов оказывается слишком низким оформлении таких интерфейсов сложно использовать полный спектр цветов относится имитации объ ма использованием теней применению других визуальных эффектов читаю светлый текст расположенный т мном фоне устают глаза явлениями вроде симультанного контраста сложно иметь дело использовании светлых применяется т мная тема вс лишь усложняется  человек усилиями которого появилась т мная тема  та работа которой хочу рассказать направлена именно разработку т мной темы несмотря многие пользователи давно просили оснастить ресурс темой ходе продвижения т мной теме нам пришлось решить множество задач частности модернизирован фронтенд код улучшена доступность контента работая т мной темой получили стимул широкому использованию проекте нашей дизайн системы  можем дать пользователям т мную тему попутно открыть дорогу улучшению доступности проекта ответили вопрос положительно сделав вс ч м расскажу   исследование цветов  создании исходных цветовых шкал проекта вероятно несколько наивно брали некое цветовое значение модифицировали использованием трансформаций реализуемых помощью например могли объявить переменную несколько сделать цвет темнее воспользовавшись конструкцией касается многократного осветления цвета использованием это способно дать цветовую шкалу цвета которой расположены диапазоне шагом  впервые попробовал понять ресурс мог выглядеть т мном режиме решил просто попробовать поменять белый фон ч рный перевернуть цветовые шкалы таком подходе цвет становится цветом соответствующим образом меняются цвета расположенные начальным конечным цветами шкалы сами цвета остаются теми использовались раньше     светлая т мная цветовые шкалы красного цвета  таком подходе пострадала контрастность элементов получилось содержало целом нравится т мных темах например внимательно присмотреться самому т мному варианту красного цвета расположенному т мном фоне видно цвет оказывается практически неразличимым подробнее поговорим ниже     нам определ нно нужно придумать получше   начало работы проектирование макета  просто попытавшись обратить цветовые шкалы самом деле добился шаг назвать реальным началом работы т мной темой поэтому решил заняться разработкой макета ручным подбором цветов подбирал цвета ориентируясь мо м представлении должен выглядеть думая новые цвета будут соотноситься существующими уменьшение общего контраста ключом сохранению эффекта глубины интерфейсе поддержке теней элементов применению полного спектра цветов     начало работы проектирования макета позволило нам первую очередь понять какому эстетическому эффекту стремимся обращая пока внимание технические требования проекту   подбор улучшенного алгоритма работы цветами  подобрал т мной темы светлый фон появилась возможность глубоко исследовать цветовые шкалы сначала нужно разобраться некоторыми цветовыми проблемами существующей дизайн системы которые появлялись применении светлой темы светлом конце спектра красные лтые цвета выглядели хотелось некоторые цвета обладали самыми светлыми значениями слишком близкими белому цвету цвета самые светлые значения которых слишком т мными     самый светлый вариант лтого цвета неотличим белого самый т мный неотличим ч рного  проблемы т мном конце спектра используя качестве фоновых цвета заметили цвета неотличимы ч рного друг друга нам нужен алгоритм который дал нам цвета основной тон которых различим самых светлых самых т мных вариантов это позволило создавать компоненты использованием данных цветовых значений     самые т мные варианты наших цветов неотличимы ч рного друг друга  создавая компоненты реализующие уведомления могли пользоваться цветами нашей дизайн системы вместо нам нужно подбирать глаз собственные цвета     цвета прекрасны основаны цветовых значениях наших цветовых шкал  нормализации цветов воспользовался замечательным инструментом вместо менять цвета простейшим способом линейно шагом применил кривые безье это позволило достичь значительных улучшений крайних положениях цветовых шкал     нормализации цветов светлой части спектра смог создать уведомления цвета которых взяты цветов нашей дизайн системы   т мные версии цветов  привели порядок светлую версию сайта пришло время опробовать новые цвета т мном фоне итоге прибегнул ручным настройкам выдавал алгоритм подбора цветов сделав это сохранения фирменных цветов которые использовались очень давно это позволило использовать новые цвета продакшне обойтись слишком резкого изменения внешнего вида проекта     полная нормализованная цветовая гамма   реализация т мной темы интерфейсе  рассчитывал оснастить т мной темой сначала реализовать т мную тему нашей дизайн системе используя е роли полигона обкатки новой технологии   переменные  нужно преобразовать статические компилируемые помощью шестнадцатеричные цветовые значения пользовательские свойства рассчитанные использование время работы программы речь ид т цветовые значения хранились использованием конструкций вида применением статических конструкций вида это интересная задача рамках нашей дизайн системы рамках сайта обычно брали единственное цветовое значение вроде делали светлее темнее выделения разных состояний элементов вроде состояний принимаемых элементами наведении мыши получении ими фокуса использования качестве фонового цвета цвета границ элементов  говорить цветах каждой кнопок которых цветах каждого состояния каждой кнопки сказать цвета получались ходе набора трансформаций единственного скомпилированного цветового значения это напоминало одну сцену фильма игра понижение речь шла возможности превратить десятимиллионную инвестицию миллиарды долларов неудивительно такие трансформации привели финансовому кризису  проблема обычных переменных заключается применять трансформации значения переменных вычисляются время выполнения кода поэтому конструкция наподобие приводит ошибке компиляции  вс это означало нужно переработать код отвечающий например стилизацию кнопок сначала выглядел     нужно перейти указание точных цветовых значений описанных нашей цветовой системе результате нужно выйти вариант кода     ясно одними кнопками вс ограничивалось поэтому нужно переработать стили компонентов имеющиеся самое касалось уведомлений всплывающих меню модальных окон ссылок многих других компонентов   браузерная совместимость  говорить переменных применение означало необходимость уч та поддержки браузерами частности поддерживает браузер котором забывали итоге решили отказаться поддержки избавившись тех хаков которые добавили систему годы е развития принимая внимание особенности данного браузера кроме решили отправлять пользователям уведомления предложением установить новый браузер это решение далось нам нелегко претворение жизнь потребовало недель рефакторинга   условные классы  ограничивал смог работать цветами решил добавить элементу класс сделав это смог заменить светлые цвета т мные эквиваленты помощью соответствующего медиа запроса кроме могли полностью отказаться медиа запроса просто добавив класс это позволило пользователям пользоваться т мной темой сайта независимо системных настроек результате получилось     достижения полной гибкости т возможность работать атомарными цветовыми классами которые применяются включена т мная тема подробности поддержке почитать например добавив элементу класс дизайнер выражает следующую мысль т мном режиме нужно использовать фона зел ный цвет дополнительные условные классы предназначенные т режима позволяют нам убирать границы элементов менять фоны настраивать цвет текста твите увидеть интересный пример настройки цвета такая настройка необходима т мном режиме хочу отметить одним источников вдохновения работе т мным режимом сайта стал фреймворк   использование т мной темы  т мная тема реализована решили добавить верхнюю часть интерфейса системы кнопку позволяющую переключаться темами сотрудников компании должна быстрая удобная возможность переключения разными цветовыми темами сайта     переключение светлой т мной темами   реализация т мной темы главном сайте  задачи связанные реализацией т мной темы интерфейсе дизайн системы решил сравнительно легко рефакторинг ходе которого учитываются соображения будущего развития системы облегчает меньше основной сайт страдает последствий ошибочных решений принятых прошлом оснастить т мной темой нужно обеспечить поддержку переменных ради обратной совместимости решения это позволило нам организовать применение т мной темы инкрементально отдельных частях интерфейса  большая часть нашего интерфейса созданная года основана эта часть интерфейса получает дополнительных усилий нашей стороны т мную тему отзывчивые макеты насч т основной части интерфейса вс далеко просто   основные цвета сайта  начала нужно внести сайт самые крупные изменения которые сделать нарушив стандартную светлую тему задачи которые предстояло решить заключались основном замене статических переменных эквивалентные переменные сначала применил стиль фону сайта заменив стиль благодаря этому основную площадь станиц легко перекрасить фоновый т мный цвет затем проделал ту операцию цветами шрифтов некоторых других элементов эта работа основном заключалась удалении большого объ ма кода например часто увлекались чрезмерной детализацией стилей задавая цвета шрифтов дочерних элементов хотя вполне могли обойтись цветовыми значениями унаследованными родительских элементов   демонстрация нового дизайна сотрудникам компании  поработал крупными блоками сайта попросил наших программистов адама леара ника кравера помочь найти способ показа предварительного варианта т мной темы сотрудникам это позволило сотрудникам включать т мную тему пока очень дал кую готовности видеть какие области сайта ещ нуждаются доработке это полагал подвигнет помощь доработке частей сайта наибольшим трафиком это позволило преодолеть основной барьер пути новому дизайну именно помогло интегрировать новый дизайн существующую кодовую базу   кнопки  область сайта работой которой занимался создана использованием подготовить е использованию т режима нужно решить особенно задач скажем ходе работы решить нужна граница качестве фонового цвета нужен особый оттенок серого этим подготовка применению т режима могла ограничиться сожалению большая часть сайта создана использования  ярче это проявилось дело дошло кнопок годы работы сайтом н м применено множество реализаций кнопок это особенно расстраивало стилизовали сами элементы это означает любому элементу элементу оформленному назначался стиль применяемый умолчанию стиль отличается очень высоким уровнем специфичности основан устаревшем наборе правил  вышеозначенный факт прив л необходимости проведения большого рефакторинга который вс ещ продолжается нацелен удаление стилей уровня элементов замену эквиваленты частности речь ид т сотни элементов нужно заменить кроме добавило работы отмечу часто привязывали визуальным селекторам функционал поменять классы влияющие внешний вид элемента это поломать функционал кнопки результате ходе переработки тысяч кнопок нужно сначала добавить классы вида подключить обработчики затем избавиться старых стилей задающих внешний вид кнопок  это итоге привело удалению большей части старых классов кнопок позволило кнопкам правильно менять цвета включении т мной темы   заголовок сайта  ещ усложнило задачу заголовок используемый вс м сайте работать разных режимах речь ид т светлом т мном режимах режиме поддержки особой темы варианте сайта команд корпоративных систем принудительно используется т мная тема заголовка кроме командной версии используется цвет задаваемый цветом командного аватара многие другие наши компоненты заголовка сайта предусматривает наличие единственного цвета которого зависит заголовок светлым т мным цвет использованием сложных инструкций трансформируется позволяет получать разные варианты однако могли поступить поступили перерабатывая код дизайн системы могли просто выбросить весь старый заменить код котором используются переменные дело наши корпоративные клиенты самом деле полностью помощью настраивают внешний вид заголовка цветовые варианты генерируются базе единственного цвета     светлый заголовок     т мный заголовок     командный заголовок  случае светлым заголовком нам нужно найти механизм позволяющий узнавать задан некий цвет помощью переменной помощью статического шестнадцатеричного значения цвет задан помощью переменной могли полностью пропустить трансформацию создавая заголовок который мог менять цвета основываясь параметрах т мной темы вместо использовалась статическая переменная нужно оценить цвет предмет является светлым т мным создать соответствующий заголовок  итоге вышли подход     затем основе полученного значения созда тся правильный заголовок   теги  мог дать совет занимается проектированием компонентов звучал описывайте компонентах влияет расположение странице другими словами какое пространство разделяет компоненты должен определять контекст котором применяются задавать подобные вещи самом компоненте ранних версиях решено компонентам должны применяться внешние отступы теги кнопки оказались подвержены проблеме связанной ещ сильнее вс усложнить большинство тегов генерировалось помощью единственного вспомогательного метода  рефакторинг тегов предусматривал замену компонентов компоненты рассчитанные применение разных эта работа предусматривала внесение изменений учитывающих использование тому нужно изменить метод отвечающий генерирование тегов сделав принимал произвольные классы влияющие размещение элементов дело определ нных контекстах теги понадобиться поместить макет сделав это вместо полагаться заранее заданные внешние отступы вместо бороться такими отступами   стилизация публикаций  основной объ м составляют публикации сделанные пользователями публикации именно вопросы ответы комментарии оформляются помощью разметки время запуска разметка сравнительно новой технологией  годы развития веба выработались некоторые стандартные способы вывода наподобие заголовков цитат внедрение т мной темы представляло собой отличный момент пересмотра нашего подхода форматированию публикаций самым неоднозначным вопросом деле оказалось форматирование цитат  изначально цитаты оформлены использованием мощного лтого фонового цвета которого снижалась контрастность самой цитаты лтый цвет кроме вызывает определ нные проблемы выводе т мном фоне итоге перешли общепринятому способу вывода цитат воспользовавшись узкой серой вертикальной полосой выделения   стилизация кода  страницах вполне понятно выводится фрагментов кода цвета которые использовали подсветки синтаксиса имели общего нашими фирменными цветами сильное подозрение цвета являются наследием первой использованной проекте библиотеки подсветки синтаксиса проанализировав цвета решил подвергнуть подстветку синтаксиса глубокому редизайну результате цвета подсветки заменены цветами нашей дизайн системы это относится светлой т мной темам сделано это получилось отличалось кардинальным образом раньше   результаты     светлая тема бета версия т мной темы выпущенная марта  благодаря тому объ му работ рефакторингу который проделали двигаясь т мной теме получили возможность особых сложностей вносить внешний вид проекта достаточно большие изменения основываясь можем например разработать высококонтрастную тему сайта повышающую доступность  создание т мной темы стало результатом фундаментального сдвига подходе дизайну частности речь ид т применении дизайн системы продвижением которой занимаюсь год создание т мной темы стало отличной возможностью перестроить многие части сайта это первый многих проектов которые позволят повысить доступность  учитывать отказ поддержки работа т мной темой началась июле года направленного исследование ситуации апреле обсуждения касающиеся т мной темы октябре продакшн отправился экспериментальный вариант т мной темы сделано минимум бета версия т мной темы представлена пользователям случилось это марта года  уважаемые читатели пользуетесь нравится новая т мная тема   теги дизайн разработка добавить метки хабы блог компании разработка веб сайтов дизайн укажите причину минуса автор поработал ошибками  отправить анонимно 